modules:
    - !R.module &base_svc
        name: "base_svc"
        res:
            - !R.nginx
                sudo : True

    - !R.module &pylon_action
        name: "pylon_action"
        res:
            - !R.vars
                RUN_PATH    : "${PRJ_ROOT}/run/${APP_SYS}"
            - !R.nginx_conf_tpl
                tpl: "${PRJ_ROOT}/conf/options/tpl_${APP_SYS}_ngx.conf"
                dst: "${PRJ_ROOT}/conf/used/${USER}_${PRJ_KEY}_${APP_SYS}_ngx.conf"
                sudo: True
            - !R.fpm_svc
                fpm_conf: "${ENV}"
                fpm_cnt:  "64"
            - !R.autoload
                src:  "${MODULES}"

    - !R.module &pylon_golang
        name: "pylon_golang"
        #res:
            #- !R.nginx_conf_tpl
        #tpl: "${PRJ_ROOT}/conf/options/tpl_${APP_SYS}_ngx.conf"
        #dst: "${PRJ_ROOT}/conf/used/${USER}_${PRJ_KEY}_${APP_SYS}_ngx.conf"
        #sudo: True

    - !R.module &pylon_php
        name: "pylon_php"
        res:
            - !R.vars
                RUN_PATH    : "${PRJ_ROOT}/run/${APP_SYS}"
            - !R.autoload
                src:  "${MODULES}"

    - !R.module &origin_php
        name: "origin_php"
        res:
            - !R.vars
                RUN_PATH    : "${PRJ_ROOT}/run/${APP_SYS}"
            - !R.autoload
                src:  "${MODULES}"
